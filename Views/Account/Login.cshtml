@model AlertSystem.Models.LoginViewModel
@{
    ViewData["Title"] = "Sign in";
}

<div class="d-flex align-items-center justify-content-center" style="min-height: calc(100vh - 120px);">
    <div class="card shadow-sm" style="width: 100%; max-width: 420px;">
        <div class="card-body p-4 p-md-5">
            <div class="text-center mb-4">
                <div class="fw-bold fs-4">Alert System</div>
                <div class="text-muted">Welcome back</div>
            </div>

            <form asp-action="Login" method="post" novalidate>
                <div asp-validation-summary="ModelOnly" class="alert alert-danger py-2" role="alert" style="display:none"></div>

                <div class="mb-3">
                    <label asp-for="Email" class="form-label">Email address</label>
                    <div class="input-group">
                        <span class="input-group-text">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v.217L8 8.917.001 4.217 0 4z"/><path d="M0 4.697v6.104l5.803-3.65L0 4.697zm6.761 3.396-6.57 4.138A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.769l-6.57-4.138L8 9.583l-1.239-.49zM16 4.697l-5.803 2.454L16 10.801V4.697z"/></svg>
                        </span>
                        <input asp-for="Email" class="form-control" autocomplete="username" placeholder="name@example.com" />
                    </div>
                    <span asp-validation-for="Email" class="text-danger small"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="Password" class="form-label">Password</label>
                    <div class="input-group" x-data>
                        <span class="input-group-text">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M3 8a5 5 0 1 1 10 0v1h1.5a.5.5 0 0 1 .5.5v5A1.5 1.5 0 0 1 13.5 16h-11A1.5 1.5 0 0 1 1 14.5v-5a.5.5 0 0 1 .5-.5H3V8zm1 1h8V8a4 4 0 1 0-8 0v1z"/></svg>
                        </span>
                        <input asp-for="Password" class="form-control" autocomplete="current-password" placeholder="Your password" id="password-input" />
                        <button type="button" class="btn btn-outline-secondary" id="toggle-password" tabindex="-1" aria-label="Show password">
                            <span class="show">Show</span>
                            <span class="hide d-none">Hide</span>
                        </button>
                    </div>
                    <span asp-validation-for="Password" class="text-danger small"></span>
                </div>

                <div class="d-flex align-items-center justify-content-between mb-3">
                    <div class="form-check">
                        <input asp-for="RememberMe" class="form-check-input" />
                        <label asp-for="RememberMe" class="form-check-label">Remember me</label>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary w-100">Sign in</button>

            </form>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        (function () {
            const summary = document.querySelector('[asp-validation-summary]');
            if (summary) {
                const observer = new MutationObserver(() => {
                    summary.style.display = summary.innerText.trim().length ? 'block' : 'none';
                });
                observer.observe(summary, { childList: true, subtree: true, characterData: true });
            }

            const pwd = document.getElementById('password-input');
            const toggle = document.getElementById('toggle-password');
            if (pwd && toggle) {
                toggle.addEventListener('click', function () {
                    const isPassword = pwd.getAttribute('type') === 'password';
                    pwd.setAttribute('type', isPassword ? 'text' : 'password');
                    toggle.querySelector('.show')?.classList.toggle('d-none', !isPassword);
                    toggle.querySelector('.hide')?.classList.toggle('d-none', isPassword);
                    toggle.setAttribute('aria-label', isPassword ? 'Hide password' : 'Show password');
                });
            }
        })();
    </script>
}


